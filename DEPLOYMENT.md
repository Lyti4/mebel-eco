# Руководство по развертыванию сайта на Netlify

Это руководство описывает процесс развертывания сайта МебельЭко на платформе Netlify.

## Подготовка к развертыванию

1. Убедитесь, что у вас есть учетная запись на [Netlify](https://www.netlify.com/).
2. Убедитесь, что у вас есть доступ к GitHub-репозиторию проекта.
3. Проверьте, что все изменения сохранены и отправлены в репозиторий GitHub.

## Настройка автоматического развертывания

### Шаг 1: Создайте новый сайт на Netlify

1. Войдите в свою учетную запись Netlify.
2. На главной странице нажмите кнопку "New site from Git".
3. Выберите GitHub в качестве провайдера Git.
4. Выберите репозиторий с проектом.

### Шаг 2: Настройте параметры сборки

В форме создания нового сайта укажите следующие параметры:

- **Branch to deploy**: `main` (или другая основная ветка)
- **Build command**: `bun run build`
- **Publish directory**: `dist`

### Шаг 3: Настройте переменные среды (если необходимо)

Если ваш проект требует каких-либо переменных среды, нажмите "Show advanced" и добавьте их в разделе "Advanced build settings".

### Шаг 4: Нажмите "Deploy site"

Нажмите кнопку "Deploy site", чтобы начать процесс развертывания.

## Настройка Netlify CMS

### Шаг 1: Настройка аутентификации

1. В панели управления Netlify выберите свой сайт.
2. Перейдите в раздел "Site settings" → "Identity".
3. Нажмите кнопку "Enable Identity".
4. Настройте параметры регистрации:
   - Registration preferences: Invite only
   - External providers: GitHub

### Шаг 2: Настройка Git Gateway

1. В разделе Identity перейдите в "Services" → "Git Gateway".
2. Нажмите кнопку "Enable Git Gateway".

### Шаг 3: Создание пользователей

1. В разделе Identity перейдите в "Invite users".
2. Введите адрес электронной почты пользователя, которому хотите предоставить доступ.
3. Нажмите "Send" для отправки приглашения.

## Настройка пользовательского домена (опционально)

### Шаг 1: Добавьте домен

1. В панели управления Netlify выберите свой сайт.
2. Перейдите в раздел "Site settings" → "Domain management".
3. Нажмите кнопку "Add custom domain".
4. Введите свой домен и нажмите "Verify".

### Шаг 2: Настройте DNS

Следуйте инструкциям Netlify для настройки DNS-записей у вашего регистратора домена.

## Проверка развертывания

1. Дождитесь завершения процесса сборки и развертывания сайта.
2. Проверьте работу сайта по предоставленному Netlify URL или по вашему пользовательскому домену.
3. Проверьте работу админ-панели по адресу `/admin/`.

## Устранение неполадок

### Ошибки сборки

Если возникают ошибки во время сборки:

1. Проверьте логи сборки в Netlify.
2. Убедитесь, что все зависимости указаны в package.json.
3. Проверьте, что команда сборки (`bun run build`) работает локально.

### Проблемы с Netlify CMS

Если Netlify CMS не работает или возникают ошибки аутентификации:

1. Убедитесь, что Identity и Git Gateway правильно настроены.
2. Проверьте конфигурацию в файле `public/admin/config.yml`.
3. Убедитесь, что в репозитории GitHub есть ветка, указанная в конфигурации Netlify CMS.

## Дополнительные ресурсы

- [Документация Netlify](https://docs.netlify.com/)
- [Документация Netlify CMS](https://www.netlifycms.org/docs/intro/)
- [Справочник по развертыванию React-приложений на Netlify](https://www.netlify.com/blog/2016/07/22/deploy-react-apps-in-less-than-30-seconds/)
